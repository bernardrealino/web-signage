<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Controller</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    textarea { width: 100%; height: 120px; }
    input, select { margin: 10px 0; padding: 5px; }
  </style>
</head>
<body>
  <h1>Media Controller</h1>
  <label>Media List (JSON):</label><br>
  <textarea id="mediaInput">[{"src":"media/image1.jpg","duration":3000},{"src":"media/video1.mp4","duration":5000}]</textarea><br>
  <label>Default Duration (ms):</label><br>
  <input type="number" id="duration" value="3000"><br>
  <label>Orientation:</label><br>
  <select id="orientation">
    <option value="landscape">Landscape</option>
    <option value="portrait">Portrait</option>
  </select><br>
  <label>Loop Count (âˆž = leave blank):</label><br>
  <input type="number" id="loop"><br>
  <button onclick="sendUpdate()">Send Update</button>

  <script>
    const ws = new WebSocket("ws://" + location.hostname + ":3000");
    function sendUpdate() {
      let media;
      try {
        media = JSON.parse(document.getElementById("mediaInput").value);
      } catch (e) {
        alert("Invalid JSON!"); return;
      }
      const message = {
        type: "update",
        media: media,
        duration: parseInt(document.getElementById("duration").value),
        orientation: document.getElementById("orientation").value,
        loop: parseInt(document.getElementById("loop").value) || undefined
      };
      ws.send(JSON.stringify(message));
    }
  </script>
</body>
</html>